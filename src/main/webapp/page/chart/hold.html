<!DOCTYPE html>
<html>
<head>
	<title>地区类型</title>
		<link rel="stylesheet" href="/customer/layui/css/layui.css">
  <link rel="stylesheet" type="text/css" href="/customer/css/global.css">
  <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js">
  </script>
 <script src="https://cdn.bootcss.com/echarts/3.6.1/echarts.min.js"></script>
  <style type="text/css">
  	.layui-tab-title li {
    position: relative;
    line-height: 40px;
    min-width: 200px;
    padding: 0 10px;
    text-align: center;
    cursor: pointer;
	}.layui-nav {
		background-color: #dddaaa;
	}.content-box{
		border: 1px solid #ddd;
	    width: 49%;
	    background-color: #ffffff;
	    min-height: 400px;
	    float: left;
	    margin-left: 9px;
	    padding-top: 10px;
	}
	.content-box-big{
		border: 1px solid #ddd;
	    width: 98.7%;
	    background-color: #ffffff;
	    min-height: 400px;
	    float: left;
	    margin-top: 15px;
	    margin-left: 9px;
	    padding-top: 10px;
	}.content-data{
		padding: 3px;
	}.bar {
  fill: steelblue;
}

.bar:hover {
  fill: brown;
}
.axis--x{
	fill:#000000;
}
.axis--x path {
  display: none;
}
  </style>
</head>
<body>
			<!-- 	<ul class="layui-nav " lay-filter="">
                    <li class="layui-nav-item layui-this">
                        <a href="javascript:;"><i class="fa fa-home"></i>Home</a>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="fa fa-file-text"></i>客户库</a>    
                    </li>                  
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="fa fa-commenting"></i>联系记录</a>   
                    </li>
                    <li class="layui-nav-item">
                       <a href="javascript:;"><i class="fa fa-bar-chart"></i>统计报表</a> 
                    </li>
                </ul> -->
	<div class="layui-tab" style="text-align:center !important;">
  		<ul class="layui-tab-title" style="">
		    <li class="layui-this">按状态</li>
		    <li>按类型</li>
		    <li>按地区</li>
		    <li>按行业</li>
  		</ul>
		  <div class="layui-tab-content">
		    <div class="layui-tab-item layui-show" id="show-member">
		    	<div class="layui-tab-content">
		    		<div class="content-box">
						<div class="layui-tab-item layui-show">
							<div class="content-data">
								<canvas id="dataBox1" width="750" height="400"></canvas>
							</div>
						</div>
					</div>
					<div class="content-box">
						<div class="layui-tab-item layui-show">
							<div class="content-data">
								<canvas id="dataBox2" width="750px" height="400px"></canvas>
							</div>
						</div>
					</div>
				</div>
				<div class="layui-tab-content">
					<div class="content-box-big">
						<div class="layui-tab-item layui-show">
							<div class="content-data">
								<canvas id="dataBox3" width="1500" height="450"></canvas>
							</div>
						</div>
					</div>
				</div>
		    </div>
		    <div class="layui-tab-item">内容2</div>
		    <div class="layui-tab-item">内容3</div>
		    <div class="layui-tab-item">暂无</div>
		  </div>
	</div>

<script type="text/javascript">
	var dataBox1 = $('#dataBox1');
	$.ajax({
		type:'post',
		url:'/customer/holdChart/memberByStatus',
		success: function(result){
			if (result.success) {
				
				mycanvas(dataBox1,result.data,'bar');
			}
		}
	});

	function mycanvas(dom,data,type){

		var name = new Array();  
				count=[];
				myData = {};
				eData = [];
				for (var i = data.length - 1; i >= 0; i--) {
					name.push(data[i].name);
					count.push(data[i].value);

				}
				myData["name"]=name;
				myData["count"]=count;
					  var option1 = {
    title : {
        text: '持有总数',
        subtext: '数据来自数据库',
        x:'center'
    },
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['持有总数']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'value',
            boundaryGap : [0, 0.1]
        }
    ],
    yAxis : [
        {
            type : 'category',
            data : myData.name
        }
    ],
    series : [
        {
            name:'2011年',
            type:'bar',
            data:myData.count
        },
    ]
};
option2 = {
	title : {
        text: '平均分布',
        subtext: '数据来自数据库',
        x:'center'
    },
    tooltip : {
	        trigger: 'item',
	        formatter: "{a} <br/>{b} : {c} ({d}%)"
	    },
	    color:['#8fc31f','#f35833','#00ccff','#ffcc00'],
	    legend: {
	        orient: 'vertical',
	        x: 'right',
	        data: myData.name,
	        
	    },
	    series : [
	        {
	            name: '签到比例分析',
	            type: 'pie',
	            radius : '55%',
	            center: ['40%', '50%'],
	            data:data,
	            itemStyle: {
	                emphasis: {
	                    shadowBlur: 10,
	                    shadowOffsetX: 0,
	                    shadowColor: 'rgba(0, 0, 0, 0.5)'
	                }
	            },
	            itemStyle: {
	                normal: {
	                    label:{ 
                            show: true, 
//	                            position:'inside',
                            formatter: '{b} : {c} ({d}%)' 
                        }
	                },
                    labelLine :{show:true}
	            }
	        }
	    ]
};
var xData = function(){
    var data = [];
    for(var i=1;i<15;i++){
     data.push(i+"号店");   
    }
    return data;
}();

option3 = {
    "title": {
        "text": "按状态统计", 
        "x": "center"
    }, 
    "tooltip": {
        "trigger": "axis", 
        "axisPointer": {
            "type": "shadow"
        },
    }, 
    "grid": {
        "borderWidth": 0, 
        "y2": 120
    }, 
    "legend": {
        "x": "right", 
        "data": [ ]
    }, 
    "toolbox": {
        "show": true, 
        "feature": {
            "restore": { }, 
            "saveAsImage": { }
        }
    }, 
    "calculable": true, 
    "xAxis": [
        {
            "type": "category", 
            "splitLine": {
                "show": false
            }, 
            "axisTick": {
                "show": false
            }, 
            "splitArea": {
                "show": false
            }, 
            "axisLabel": {
                "interval": 0, 
                "rotate": 45, 
                "show": true, 
                "splitNumber": 15, 
                "textStyle": {
                    "fontFamily": "微软雅黑", 
                    "fontSize": 12
                }
            }, 
            "data": myData.name,
        }
    ], 
    "yAxis": [
        {
            "type": "value", 
            "splitLine": {
                "show": false
            }, 
            "axisLine": {
                "show": true
            }, 
            "axisTick": {
                "show": false
            }, 
            "splitArea": {
                "show": false
            }
        }
    ], 
    "dataZoom": [
        {
            "show": true, 
            "height": 30, 
            "xAxisIndex": [
                0
            ], 
            bottom:40,
            "start": 0, 
            "end": 80
        }, 
        {
            "type": "inside", 
            "show": true, 
            "height": 15, 
            "xAxisIndex": [
                0
            ], 
            "start": 1, 
            "end": 35
        }
    ], 
    "series": [
        {
            "name": "昨日", 
            "type": "bar", 
            "stack": "总量", 
            "barMaxWidth": 50, 
            "barGap": "10%", 
            "itemStyle": {
                "normal": {
                    "barBorderRadius": 0, 
                    "color": "rgba(60,169,196,0.5)", 
                    "label": {
                        "show": true, 
                        "textStyle": {
                            "color": "rgba(0,0,0,1)"
                        }, 
                        "position": "insideTop",
                        formatter : function(p) {
	                                                return p.value > 0 ? (p.value ): '';
	                                            }
                    }
                }
            }, 
            "data": myData.count, 
        }
    ]
}

     var myChart1 = echarts.init(document.getElementById('dataBox1')); 
   myChart1.setOption(option1); 
    var myChart2 = echarts.init(document.getElementById('dataBox2')); 
   myChart2.setOption(option2); 
   var myChart3 = echarts.init(document.getElementById('dataBox3')); 
   myChart3.setOption(option3);                
	}
</script>







<div class="row-right" style="float: right;"></div>
<script src="/customer/layui/layui.js"></script>
<script type="text/javascript" src="/customer/page/chart/mychart.js"></script>
</body>
</html>